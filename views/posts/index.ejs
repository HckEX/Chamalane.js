<!DOCTYPE html>
<html>

<head>
  <% include ../partials/header %>
</head>

<body>
  <% include ../partials/nav %>

  <div class="container post post-index">
    <% include ./partials/header %>

    <div class="buttons">
        <% if(isAuthenticated){ %>
          <a class="btn btn-default" href="/posts/new">New</a>
        <% } %>
    </div>

    <table class="table table-striped posts">
      <thead>
        <tr>
          <th width="70%" class="title">Title</th>
          <th width="15%" class="author">Author</th>
          <th width="15%" class="date">Date</th>
        </tr>
      </thead>
      <tbody>
        <% if(posts == null || posts.length == 0){ %>
        <tr>
          <td class="noData" colspan=100> There is no data to show :( </td>
        </tr>
        <% } %>
        <% posts.forEach(function(post) { %>
        <tr>
          <td width="70%" class="title">
            <a href="/posts/<%= post._id %>">
              <div class="ellipsis"><%= post.title %></div>
            </a>
          </td>
          <td width="15%" class="author">
            <div class="ellipsis"><%= post.author ? post.author.username : "" %></div>
          </td>
          <td width="15%" class="date">
            <%= post.createdDate %>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</body>

</html>