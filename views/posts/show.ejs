<!DOCTYPE html>
<html>
 <head>
  <% include ../partials/header %>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
  <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/showdown@1.9.0/dist/showdown.min.js"></script>
    <script>
        var showdown = require('showdown'),
        converter = new showdown.Converter();
    </script>
 </head>
 <body>
  <% include ../partials/nav %>

  <div class="container post post-show">
   <% include ./partials/header %>

   <div class="buttons">
    <a class="btn btn-default" href="/posts">Back</a>
    <a class="btn btn-default" href="/posts/<%= post._id %>/edit">Edit</a>
    <form action="/posts/<%= post._id %>?_method=delete" method="post">
     <a class="btn btn-default" href="#" onclick="confirm('Do you want to delete this?')?this.parentElement.submit():null;">Delete</a>
    </form>
   </div>

   <div class="contentBox">
    <h3 class="contentBoxTop"><%= post.title %></h3>
    <div class="row">
     <div>
        <p class="post-body" id="body"><%= converter.makeHtml(post.body) %></p>
        <script>
            /*
            var simplemde = new SimpleMDE({
                element: document.getElementById("body"),
                toolbar: false,
                 });
            simplemde.togglePreview();
            */
            
        </script>
     </div>
    </div>
    <div class="post-info">
        <div><span>Created</span> : <%= post.createdDate %> <%= post.createdTime %></div>
        <% if(post.updatedAt) { %>
         <div><span>Updated</span> : <%= post.updatedDate %> <%= post.updatedTime %></div>
        <% } %>
       </div>
   </div>

  </div>
 </body>
</html>
